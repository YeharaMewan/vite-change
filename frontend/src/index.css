@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    @apply overflow-x-hidden;
  }
  
  body {
    @apply bg-gray-700 overflow-hidden;
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
  }

  .safe-area-padding {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

@layer components {
  /* Define CSS custom properties for consistent theming */
  :root {
    --sidebar-bg: rgb(32 33 35);
    --main-bg: rgb(52 53 65);
    --user-message-bg: rgb(52 53 65);
    --ai-message-bg: rgb(68 70 84);
    --border-color: rgba(255, 255, 255, 0.1);
    --text-primary: rgb(255 255 255);
    --text-secondary: rgb(142 142 160);
    --hover-bg: rgba(255, 255, 255, 0.1);
  }

  .sidebar-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
  }

  .sidebar-scrollbar::-webkit-scrollbar {
    width: 4px;
  }
  
  .sidebar-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .sidebar-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-white/20 rounded;
  }
  
  .sidebar-scrollbar::-webkit-scrollbar-thumb:hover {
    @apply bg-white/30;
  }

  .chat-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
  }

  .chat-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  
  .chat-scrollbar::-webkit-scrollbar-track {
    background: transparent;
    margin: 8px 0;
  }
  
  .chat-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-white/20 rounded-md;
  }
  
  .chat-scrollbar::-webkit-scrollbar-thumb:hover {
    @apply bg-white/30;
  }

  .sidebar-open {
    @apply overflow-hidden;
  }

  /* Enhanced prose styles for markdown content */
  .prose-invert {
    @apply text-white;
  }

  .prose-invert h1,
  .prose-invert h2,
  .prose-invert h3,
  .prose-invert h4,
  .prose-invert h5,
  .prose-invert h6 {
    @apply text-white;
  }

  .prose-invert strong {
    @apply text-white font-semibold;
  }

  .prose-invert code {
    @apply text-gray-300 bg-black/30 px-1 py-0.5 rounded text-sm;
  }

  .prose-invert pre {
    @apply bg-black/30 border border-white/10 rounded-lg;
  }

  .prose-invert ul,
  .prose-invert ol {
    @apply text-white;
  }

  .prose-invert li {
    @apply my-1;
  }

  .prose-invert blockquote {
    @apply border-l-4 border-gray-500 bg-black/20 p-3 rounded my-4;
  }

  /* Animation for message appearance */
  @keyframes slideInUp {
    from {
      @apply translate-y-2.5 opacity-0;
    }
    to {
      @apply translate-y-0 opacity-100;
    }
  }

  .message-enter {
    animation: slideInUp 0.3s ease-out;
  }

  /* Sidebar toggle transition */
  .sidebar-transition {
    @apply transition-transform duration-300 ease-in-out;
  }

  /* Mobile keyboard handling */
  @media (max-width: 768px) {
    .keyboard-open .chat-input {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      transform: translateY(0);
      z-index: 50;
    }
  }
}
